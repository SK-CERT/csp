version: '3'
services:

  apache:
    image: csp-apache:1.0p1
    container_name: csp-apache
    hostname: csp-apache
    shm_size: 1524m
    env_file:
      - .env
    networks:
        default:
            aliases:
                - ${IL_LOCAL_DOMAIN}
                - ${ES_LOCAL_DOMAIN}
                - ${KIBANA_LOCAL_DOMAIN}
                - ${TC_LOCAL_DOMAIN}
                - ${JITSI_LOCAL_DOMAIN}
                - ${FILES_LOCAL_DOMAIN}
                - ${VIPER_LOCAL_DOMAIN}
                - ${MISP_LOCAL_DOMAIN}
                - ${MISP_ADAPTER_LOCAL_DOMAIN}
                - ${TARANIS_LOCAL_DOMAIN}
                - ${INTELMQ_LOCAL_DOMAIN}
                - ${RT_LOCAL_DOMAIN}
                - ${RT_ADAPTER_LOCAL_DOMAIN}
                - ${ANON_LOCAL_DOMAIN}
                - ${CFG_LOCAL_DOMAIN}

    volumes:
      - SSLDatavolume:/etc/apache2/ssl
      - /opt/csp/apache2/csp-sites/:/etc/apache2/csp-sites
      - TCDatavolume:/opt/tc/
    ports:
      - "443:443"
      - "7443:7443"

volumes:
  SSLDatavolume:
    external: true
  TCDatavolume:
    external: true

networks:
  default:
    external:
      name: ${LOCAL_DOMAIN}



